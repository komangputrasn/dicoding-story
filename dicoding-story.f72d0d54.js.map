{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-799920ddb74d70e1.js","app.js","views/home-page.js","presenters/story-presenter.js","presenters/base-presenter.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","models/story-model.js","services/api-service.js","services/auth-service.js","services/indexeddb-service.js","views/add-story-page.js","services/push-notification-service.js","views/login-page.js","presenters/auth-presenter.js","models/auth-model.js","views/register-page.js","views/detail-page.js","views/favorites-page.js","node_modules/@parcel/runtime-js/lib/runtime-748a52c97e69c5e2.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SERVER_PORT = 1234;var HMR_SECURE = false;var HMR_ENV_HASH = \"439701173a9199ea\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"cb5ea115f72d0d54\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_SERVER_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_SERVER_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */,\n  disposedAssets /*: {|[string]: boolean|} */,\n  assetsToDispose /*: Array<[ParcelRequire, string]> */,\n  assetsToAccept /*: Array<[ParcelRequire, string]> */,\n  bundleNotFound = false;\nfunction getHostname() {\n  return HMR_HOST || (typeof location !== 'undefined' && location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || (typeof location !== 'undefined' ? location.port : HMR_SERVER_PORT);\n}\n\n// eslint-disable-next-line no-redeclare\nlet WebSocket = globalThis.WebSocket;\nif (!WebSocket && typeof module.bundle.root === 'function') {\n  try {\n    // eslint-disable-next-line no-global-assign\n    WebSocket = module.bundle.root('ws');\n  } catch {\n    // ignore.\n  }\n}\nvar hostname = getHostname();\nvar port = getPort();\nvar protocol = HMR_SECURE || typeof location !== 'undefined' && location.protocol === 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif (!parent || !parent.isParcelRequire) {\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      // If we're running in the dev server's node runner, listen for messages on the parent port.\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.on('message', async message => {\n          try {\n            await handleMessage(message);\n            parentPort.postMessage('updated');\n          } catch {\n            parentPort.postMessage('restart');\n          }\n        });\n\n        // After the bundle has finished running, notify the dev server that the HMR update is complete.\n        queueMicrotask(() => parentPort.postMessage('ready'));\n      }\n    } catch {\n      if (typeof WebSocket !== 'undefined') {\n        try {\n          ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n        } catch (err) {\n          // Ignore cloudflare workers error.\n          if (err.message && !err.message.includes('Disallowed operation called within global scope')) {\n            console.error(err.message);\n          }\n        }\n      }\n    }\n  }\n  if (ws) {\n    // $FlowFixMe\n    ws.onmessage = async function (event /*: {data: string, ...} */) {\n      var data /*: HMRMessage */ = JSON.parse(event.data);\n      await handleMessage(data);\n    };\n    if (ws instanceof WebSocket) {\n      ws.onerror = function (e) {\n        if (e.message) {\n          console.error(e.message);\n        }\n      };\n      ws.onclose = function () {\n        console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n      };\n    }\n  }\n}\nasync function handleMessage(data /*: HMRMessage */) {\n  checkedAssets = {} /*: {|[string]: boolean|} */;\n  disposedAssets = {} /*: {|[string]: boolean|} */;\n  assetsToAccept = [];\n  assetsToDispose = [];\n  bundleNotFound = false;\n  if (data.type === 'reload') {\n    fullReload();\n  } else if (data.type === 'update') {\n    // Remove error overlay if there is one\n    if (typeof document !== 'undefined') {\n      removeErrorOverlay();\n    }\n    let assets = data.assets;\n\n    // Handle HMR Update\n    let handled = assets.every(asset => {\n      return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n    });\n\n    // Dispatch a custom event in case a bundle was not found. This might mean\n    // an asset on the server changed and we should reload the page. This event\n    // gives the client an opportunity to refresh without losing state\n    // (e.g. via React Server Components). If e.preventDefault() is not called,\n    // we will trigger a full page reload.\n    if (handled && bundleNotFound && assets.some(a => a.envHash !== HMR_ENV_HASH) && typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n      handled = !window.dispatchEvent(new CustomEvent('parcelhmrreload', {\n        cancelable: true\n      }));\n    }\n    if (handled) {\n      console.clear();\n\n      // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n      if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n        window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n      }\n      await hmrApplyUpdates(assets);\n      hmrDisposeQueue();\n\n      // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n      let processedAssets = {};\n      for (let i = 0; i < assetsToAccept.length; i++) {\n        let id = assetsToAccept[i][1];\n        if (!processedAssets[id]) {\n          hmrAccept(assetsToAccept[i][0], id);\n          processedAssets[id] = true;\n        }\n      }\n    } else fullReload();\n  }\n  if (data.type === 'error') {\n    // Log parcel errors to console\n    for (let ansiDiagnostic of data.diagnostics.ansi) {\n      let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n      console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n    }\n    if (typeof document !== 'undefined') {\n      // Render the fancy html overlay\n      removeErrorOverlay();\n      var overlay = createErrorOverlay(data.diagnostics.html);\n      // $FlowFixMe\n      document.body.appendChild(overlay);\n    }\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"${protocol === 'wss' ? 'https' : 'http'}://${hostname}:${port}/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if (typeof location !== 'undefined' && 'reload' in location) {\n    location.reload();\n  } else if (typeof extCtx !== 'undefined' && extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  } else {\n    try {\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.postMessage('restart');\n      }\n    } catch (err) {\n      console.error('[parcel] ⚠️ An HMR update was not accepted. Please restart the process.');\n    }\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout || typeof document === 'undefined') {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    }\n\n    // Always traverse to the parent bundle, even if we already replaced the asset in this bundle.\n    // This is required in case modules are duplicated. We need to ensure all instances have the updated code.\n    if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  checkedAssets = {};\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else if (a !== null) {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      bundleNotFound = true;\n      return true;\n    }\n    return hmrAcceptCheckOne(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return null;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  if (!cached) {\n    return true;\n  }\n  assetsToDispose.push([bundle, id]);\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n  return false;\n}\nfunction hmrDisposeQueue() {\n  // Dispose all old assets.\n  for (let i = 0; i < assetsToDispose.length; i++) {\n    let id = assetsToDispose[i][1];\n    if (!disposedAssets[id]) {\n      hmrDispose(assetsToDispose[i][0], id);\n      disposedAssets[id] = true;\n    }\n  }\n  assetsToDispose = [];\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    let assetsToAlsoAccept = [];\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      let additionalAssets = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (Array.isArray(additionalAssets) && additionalAssets.length) {\n        assetsToAlsoAccept.push(...additionalAssets);\n      }\n    });\n    if (assetsToAlsoAccept.length) {\n      let handled = assetsToAlsoAccept.every(function (a) {\n        return hmrAcceptCheck(a[0], a[1]);\n      });\n      if (!handled) {\n        return fullReload();\n      }\n      hmrDisposeQueue();\n    }\n  }\n}","const API_BASE_URL = \"https://story-api.dicoding.dev/v1\";\r\n\r\nconst API_ENDPOINTS = {\r\n  register: `${API_BASE_URL}/register`,\r\n  login: `${API_BASE_URL}/login`,\r\n  stories: `${API_BASE_URL}/stories`,\r\n  guestStories: `${API_BASE_URL}/stories/guest`,\r\n  detailStory: (id) => `${API_BASE_URL}/stories/${id}`,\r\n  subscribe: `${API_BASE_URL}/notifications/subscribe`,\r\n  unsubscribe: `${API_BASE_URL}/notifications/subscribe`,\r\n};\r\n\r\nimport HomePage from \"./views/home-page.js\";\r\nimport AddStoryPage from \"./views/add-story-page.js\";\r\nimport LoginPage from \"./views/login-page.js\";\r\nimport RegisterPage from \"./views/register-page.js\";\r\nimport DetailPage from \"./views/detail-page.js\";\r\nimport FavoritesPage from \"./views/favorites-page.js\";\r\n\r\nimport AuthService from \"./services/auth-service.js\";\r\nimport PushNotificationService from \"./services/push-notification-service.js\";\r\nimport IndexedDBService from \"./services/indexeddb-service.js\";\r\n\r\nconst routes = {\r\n  \"/\": HomePage,\r\n  \"/home\": HomePage,\r\n  \"/add\": AddStoryPage,\r\n  \"/login\": LoginPage,\r\n  \"/register\": RegisterPage,\r\n  \"/detail/:id\": DetailPage,\r\n  \"/favorites\": FavoritesPage,\r\n};\r\n\r\nclass App {\r\n  constructor() {\r\n    this._content = document.getElementById(\"main-content\");\r\n    this._loginMenu = document.getElementById(\"loginMenu\");\r\n    this._authService = new AuthService();\r\n    this._pushNotificationService = new PushNotificationService();\r\n    this._indexedDBService = new IndexedDBService();\r\n\r\n    this._initApp();\r\n  }\r\n\r\n  async _initApp() {\r\n    await this._registerServiceWorker();\r\n    await this._initServices();\r\n    this._updateAuthMenu();\r\n\r\n    window.addEventListener(\"hashchange\", () => {\r\n      this._renderPage();\r\n    });\r\n\r\n    this._renderPage();\r\n  }\r\n  async _registerServiceWorker() {\r\n    if (\"serviceWorker\" in navigator) {\r\n      try {\r\n        const registration = await navigator.serviceWorker.register(\r\n          new URL(\"./sw.js\", import.meta.url)\r\n        );\r\n        console.log(\"Service Worker registered successfully:\", registration);\r\n\r\n        // Handle service worker updates\r\n        registration.addEventListener(\"updatefound\", () => {\r\n          const newWorker = registration.installing;\r\n          newWorker.addEventListener(\"statechange\", () => {\r\n            if (\r\n              newWorker.state === \"installed\" &&\r\n              navigator.serviceWorker.controller\r\n            ) {\r\n              // New service worker available\r\n              this._showUpdateNotification();\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Service Worker registration failed:\", error);\r\n      }\r\n    }\r\n  }\r\n  async _initServices() {\r\n    try {\r\n      // Initialize IndexedDB\r\n      await this._indexedDBService.init();\r\n\r\n      // Initialize push notifications if user is logged in\r\n      if (this._authService.isLoggedIn()) {\r\n        await this._pushNotificationService.init();\r\n      }\r\n\r\n      // Setup install prompt\r\n      this._setupInstallPrompt();\r\n\r\n      // Setup offline/online detection\r\n      this._setupOfflineDetection();\r\n    } catch (error) {\r\n      console.error(\"Failed to initialize services:\", error);\r\n    }\r\n  }\r\n\r\n  _setupInstallPrompt() {\r\n    let deferredPrompt;\r\n\r\n    window.addEventListener(\"beforeinstallprompt\", (e) => {\r\n      // Prevent the mini-infobar from appearing on mobile\r\n      e.preventDefault();\r\n      // Stash the event so it can be triggered later\r\n      deferredPrompt = e;\r\n      // Show install button\r\n      this._showInstallPrompt(deferredPrompt);\r\n    });\r\n\r\n    window.addEventListener(\"appinstalled\", () => {\r\n      console.log(\"PWA was installed\");\r\n      this._hideInstallPrompt();\r\n    });\r\n  }\r\n\r\n  _showInstallPrompt(deferredPrompt) {\r\n    const installPrompt = document.createElement(\"div\");\r\n    installPrompt.className = \"install-prompt\";\r\n    installPrompt.id = \"install-prompt\";\r\n    installPrompt.innerHTML = `\r\n      <p>📱 Install Dicoding Story App for a better experience!</p>\r\n      <button id=\"install-app\">Install</button>\r\n      <button id=\"dismiss-install\">Later</button>\r\n    `;\r\n\r\n    document.body.appendChild(installPrompt);\r\n\r\n    document\r\n      .getElementById(\"install-app\")\r\n      .addEventListener(\"click\", async () => {\r\n        // Show the install prompt\r\n        deferredPrompt.prompt();\r\n        // Wait for the user to respond to the prompt\r\n        const { outcome } = await deferredPrompt.userChoice;\r\n        console.log(`User response to the install prompt: ${outcome}`);\r\n        // Clear the deferred prompt variable\r\n        deferredPrompt = null;\r\n        this._hideInstallPrompt();\r\n      });\r\n\r\n    document.getElementById(\"dismiss-install\").addEventListener(\"click\", () => {\r\n      this._hideInstallPrompt();\r\n    });\r\n  }\r\n\r\n  _hideInstallPrompt() {\r\n    const installPrompt = document.getElementById(\"install-prompt\");\r\n    if (installPrompt) {\r\n      installPrompt.remove();\r\n    }\r\n  }\r\n\r\n  _setupOfflineDetection() {\r\n    const showOfflineIndicator = () => {\r\n      if (!document.getElementById(\"offline-indicator\")) {\r\n        const indicator = document.createElement(\"div\");\r\n        indicator.id = \"offline-indicator\";\r\n        indicator.className = \"offline-indicator\";\r\n        indicator.textContent =\r\n          \"📶 You are offline. Some features may be limited.\";\r\n        document.body.appendChild(indicator);\r\n      }\r\n    };\r\n\r\n    const hideOfflineIndicator = () => {\r\n      const indicator = document.getElementById(\"offline-indicator\");\r\n      if (indicator) {\r\n        indicator.remove();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"online\", hideOfflineIndicator);\r\n    window.addEventListener(\"offline\", showOfflineIndicator);\r\n\r\n    // Check initial state\r\n    if (!navigator.onLine) {\r\n      showOfflineIndicator();\r\n    }\r\n  }\r\n\r\n  _showUpdateNotification() {\r\n    // Show a notification that the app has been updated\r\n    const updateBanner = document.createElement(\"div\");\r\n    updateBanner.className = \"update-banner\";\r\n    updateBanner.innerHTML = `\r\n      <div class=\"alert alert-info\">\r\n        <p>A new version is available! \r\n        <button id=\"refresh-app\">Refresh to update</button>\r\n        <button id=\"dismiss-update\">Dismiss</button></p>\r\n      </div>\r\n    `;\r\n\r\n    document.body.insertBefore(updateBanner, document.body.firstChild);\r\n\r\n    document.getElementById(\"refresh-app\").addEventListener(\"click\", () => {\r\n      window.location.reload();\r\n    });\r\n\r\n    document.getElementById(\"dismiss-update\").addEventListener(\"click\", () => {\r\n      updateBanner.remove();\r\n    });\r\n  }\r\n\r\n  _updateAuthMenu() {\r\n    const isLoggedIn = this._authService.isLoggedIn();\r\n    const username = this._authService.getUserName();\r\n\r\n    if (isLoggedIn) {\r\n      this._loginMenu.textContent = `Logout (${username || \"User\"})`;\r\n      this._loginMenu.href = \"#/home\";\r\n      this._loginMenu.setAttribute(\"aria-label\", \"Logout from your account\");\r\n\r\n      const oldClone = this._loginMenu.cloneNode(true);\r\n      this._loginMenu.parentNode.replaceChild(oldClone, this._loginMenu);\r\n      this._loginMenu = oldClone;\r\n\r\n      this._loginMenu.addEventListener(\"click\", (e) => {\r\n        e.preventDefault();\r\n        this._authService.logout();\r\n        this._updateAuthMenu();\r\n        window.location.hash = \"#/home\";\r\n      });\r\n    } else {\r\n      this._loginMenu.textContent = \"Login\";\r\n      this._loginMenu.href = \"#/login\";\r\n      this._loginMenu.setAttribute(\"aria-label\", \"Go to login page\");\r\n\r\n      const oldClone = this._loginMenu.cloneNode(true);\r\n      this._loginMenu.parentNode.replaceChild(oldClone, this._loginMenu);\r\n      this._loginMenu = oldClone;\r\n    }\r\n  }\r\n\r\n  async _renderPage() {\r\n    if (document.startViewTransition) {\r\n      document.startViewTransition(() => this._updateDOM());\r\n    } else {\r\n      this._updateDOM();\r\n    }\r\n  }\r\n\r\n  async _updateDOM() {\r\n    const hash = window.location.hash.slice(1).toLowerCase() || \"/\";\r\n    const url = this._parseActiveUrl(hash);\r\n    const page = this._getPage(url);\r\n\r\n    try {\r\n      this._content.innerHTML = \"\";\r\n\r\n      if (\r\n        this._routeRequiresAuth(url.resource) &&\r\n        !this._authService.isLoggedIn()\r\n      ) {\r\n        window.location.hash = \"#/login\";\r\n        return;\r\n      }\r\n\r\n      const view = new page(this._content, url.id);\r\n      await view.render();\r\n\r\n      this._updateAuthMenu();\r\n\r\n      this._content.focus();\r\n    } catch (error) {\r\n      console.error(\"Error rendering page:\", error);\r\n      this._showErrorPage(error);\r\n    }\r\n  }\r\n\r\n  _showErrorPage(error) {\r\n    this._content.innerHTML = `\r\n      <section class=\"page error-page\" role=\"alert\">\r\n        <h2>Oops! Something went wrong</h2>\r\n        <p>${error.message || \"Unknown error occurred\"}</p>\r\n        <a href=\"#/home\" class=\"btn\">Back to Home</a>\r\n      </section>\r\n    `;\r\n  }\r\n\r\n  _parseActiveUrl(url) {\r\n    const splitedUrl = url.split(\"/\");\r\n    return {\r\n      resource: `/${splitedUrl[1] || \"\"}`,\r\n      id: splitedUrl[2] || null,\r\n    };\r\n  }\r\n\r\n  _getPage(url) {\r\n    let page;\r\n\r\n    if (url.id) {\r\n      const idParameterRoute = Object.keys(routes).find((route) =>\r\n        route.includes(\"/:id\")\r\n      );\r\n\r\n      if (idParameterRoute) {\r\n        const baseRoute = idParameterRoute.replace(\"/:id\", \"\");\r\n        if (url.resource === baseRoute) {\r\n          page = routes[idParameterRoute];\r\n        }\r\n      }\r\n    } else {\r\n      page = routes[url.resource];\r\n    }\r\n\r\n    return page || routes[\"/\"];\r\n  }\r\n\r\n  _routeRequiresAuth(resource) {\r\n    return [\"/add\"].includes(resource);\r\n  }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  new App();\r\n});\r\n","import StoryPresenter from \"../presenters/story-presenter.js\";\nimport IndexedDBService from \"../services/indexeddb-service.js\";\n\nclass HomePage {\n  constructor(container) {\n    this._container = container;\n    this._presenter = new StoryPresenter(this);\n    this._indexedDBService = new IndexedDBService();\n    this._stories = [];\n    this._map = null;\n  }\n\n  async render() {\n    this._container.innerHTML = `\n      <section class=\"page\" role=\"region\" aria-labelledby=\"home-title\">\n        <h2 id=\"home-title\">Latest Stories</h2>\n        <div id=\"loading\" role=\"status\" aria-live=\"polite\">Loading stories...</div>\n        <div id=\"error-container\" role=\"alert\" aria-live=\"assertive\" style=\"display:none;\"></div>\n        <div id=\"map\" aria-label=\"Map showing story locations\"></div>\n        <div id=\"story-list\" class=\"story-list\"></div>\n      </section>\n    `;\n\n    await this._initIndexedDB();\n    await this._fetchStories();\n    this._initMap();\n    this._renderStories();\n  }\n\n  async _initIndexedDB() {\n    try {\n      await this._indexedDBService.init();\n    } catch (error) {\n      console.error(\"Failed to initialize IndexedDB:\", error);\n    }\n  }\n\n  async _fetchStories() {\n    this._stories = await this._presenter.getStories(1, 10, 1);\n  }\n\n  async _renderStories() {\n    const storyListElement = document.getElementById(\"story-list\");\n    const loadingElement = document.getElementById(\"loading\");\n\n    loadingElement.style.display = \"none\";\n\n    if (this._stories.length === 0) {\n      storyListElement.innerHTML =\n        \"<p>No stories found. Please login to see stories or add new ones.</p>\";\n      return;\n    }\n\n    // Cache stories for offline viewing\n    for (const story of this._stories) {\n      try {\n        await this._indexedDBService.cacheStory(story);\n      } catch (error) {\n        console.error(\"Failed to cache story:\", error);\n      }\n    }\n\n    storyListElement.innerHTML = await Promise.all(\n      this._stories.map(async (story) => {\n        const isFavorite = await this._checkIfFavorite(story.id);\n        return `\n      <article class=\"story-item\">\n        <img src=\"${story.photoUrl}\" alt=\"Photo by ${\n          story.name\n        }\" class=\"story-img\">\n        <div class=\"story-content\">\n          <h3>${story.name}</h3>\n          <p class=\"story-description\">${this._truncateText(\n            story.description,\n            100\n          )}</p>\n          <p class=\"story-date\">${this._formatDate(story.createdAt)}</p>\n          <div class=\"story-actions\">\n            <a href=\"#/detail/${story.id}\" class=\"story-link\">Read more</a>\n            <button \n              class=\"favorite-btn ${isFavorite ? \"is-favorite\" : \"\"}\" \n              data-story-id=\"${story.id}\"\n              aria-label=\"${\n                isFavorite ? \"Remove from favorites\" : \"Add to favorites\"\n              }\"\n            >\n              ${isFavorite ? \"❤️ Remove from Favorites\" : \"🤍 Add to Favorites\"}\n            </button>\n          </div>\n        </div>\n      </article>\n    `;\n      })\n    ).then((storyHtmlArray) => storyHtmlArray.join(\"\"));\n\n    this._initFavoriteButtons();\n  }\n\n  async _checkIfFavorite(storyId) {\n    try {\n      return await this._indexedDBService.isFavoriteStory(storyId);\n    } catch (error) {\n      console.error(\"Failed to check favorite status:\", error);\n      return false;\n    }\n  }\n\n  _initFavoriteButtons() {\n    const favoriteButtons = document.querySelectorAll(\".favorite-btn\");\n\n    favoriteButtons.forEach((button) => {\n      button.addEventListener(\"click\", async (e) => {\n        e.preventDefault();\n        const storyId = button.dataset.storyId;\n        const isFavorite = button.classList.contains(\"is-favorite\");\n\n        try {\n          if (isFavorite) {\n            await this._removeFavorite(storyId, button);\n          } else {\n            await this._addFavorite(storyId, button);\n          }\n        } catch (error) {\n          console.error(\"Failed to update favorite:\", error);\n          this.showError(\"Failed to update favorite status\");\n        }\n      });\n    });\n  }\n\n  async _addFavorite(storyId, button) {\n    const story = this._stories.find((s) => s.id === storyId);\n    if (!story) return;\n\n    await this._indexedDBService.addFavoriteStory(story);\n\n    button.classList.add(\"is-favorite\");\n    button.textContent = \"❤️ Remove from Favorites\";\n    button.setAttribute(\"aria-label\", \"Remove from favorites\");\n\n    this.showSuccess(\"Story added to favorites!\");\n  }\n\n  async _removeFavorite(storyId, button) {\n    await this._indexedDBService.removeFavoriteStory(storyId);\n\n    button.classList.remove(\"is-favorite\");\n    button.textContent = \"🤍 Add to Favorites\";\n    button.setAttribute(\"aria-label\", \"Add to favorites\");\n\n    this.showSuccess(\"Story removed from favorites!\");\n  }\n\n  _initMap() {\n    this._map = L.map(\"map\").setView([0, 0], 2);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(this._map);\n\n    this._stories.forEach((story) => {\n      if (story.lat && story.lon) {\n        const marker = L.marker([story.lat, story.lon]).addTo(this._map);\n\n        marker.bindPopup(`\n          <div class=\"map-popup\">\n            <img src=\"${story.photoUrl}\" alt=\"Photo by ${story.name}\">\n            <h3>${story.name}</h3>\n            <p>${this._truncateText(story.description, 50)}</p>\n            <a href=\"#/detail/${story.id}\">View Story</a>\n          </div>\n        `);\n      }\n    });\n  }\n\n  _truncateText(text, maxLength) {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + \"...\";\n  }\n\n  _formatDate(dateString) {\n    const options = { year: \"numeric\", month: \"short\", day: \"numeric\" };\n    return new Date(dateString).toLocaleDateString(\"id-ID\", options);\n  }\n\n  showLoading() {\n    const loadingElement = document.getElementById(\"loading\");\n    loadingElement.style.display = \"block\";\n  }\n\n  hideLoading() {\n    const loadingElement = document.getElementById(\"loading\");\n    loadingElement.style.display = \"none\";\n  }\n\n  showError(message) {\n    const errorContainer = document.getElementById(\"error-container\");\n    errorContainer.style.display = \"block\";\n    errorContainer.innerHTML = `\n      <div class=\"alert alert-danger\">\n        ${message}\n      </div>\n    `;\n  }\n\n  showSuccess(message) {\n    const errorContainer = document.getElementById(\"error-container\");\n    errorContainer.style.display = \"block\";\n    errorContainer.innerHTML = `\n      <div class=\"alert alert-success\">\n        ${message}\n      </div>\n    `;\n\n    // Auto-hide success message after 3 seconds\n    setTimeout(() => {\n      errorContainer.style.display = \"none\";\n    }, 3000);\n  }\n}\n\nexport default HomePage;\n","import BasePresenter from \"./base-presenter.js\";\nimport StoryModel from \"../models/story-model.js\"; // Impor StoryModel\n\nclass StoryPresenter extends BasePresenter {\n  constructor(view) {\n    super(view);\n    this._storyModel = new StoryModel(); // Gunakan StoryModel\n  }\n\n  async getStories(page = 1, size = 10, location = 1) {\n    try {\n      this._view.showLoading();\n      const stories = await this._storyModel.getStories(page, size, location);\n      return stories;\n    } catch (error) {\n      this._view.showError(`Failed to load stories: ${error.message}`);\n      return [];\n    } finally {\n      this._view.hideLoading();\n    }\n  }\n\n  async getStoryDetail(id) {\n    try {\n      this._view.showLoading();\n      const story = await this._storyModel.getStoryDetail(id);\n      return story;\n    } catch (error) {\n      this._view.showError(`Failed to load story: ${error.message}`);\n      throw error;\n    } finally {\n      this._view.hideLoading();\n    }\n  }\n\n  async addStory(description, photoBlob, lat, lon) {\n    try {\n      this._view.showLoading();\n      const result = await this._storyModel.addStory(\n        description,\n        photoBlob,\n        lat,\n        lon\n      );\n      this._view.showSuccess(\n        \"Story added successfully. Redirecting to home page...\"\n      );\n      return result;\n    } catch (error) {\n      this._view.showError(`Failed to add story: ${error.message}`);\n      throw error;\n    } finally {\n      this._view.hideLoading();\n    }\n  }\n}\n\nexport default StoryPresenter;\n","class BasePresenter {\n  constructor(view) {\n    this._view = view;\n  }\n\n  init() {}\n\n  handleError(error, defaultMessage = \"An error occurred\") {\n    const message = error.message || defaultMessage;\n\n    if (this._view && typeof this._view.showError === \"function\") {\n      this._view.showError(message);\n    }\n\n    console.error(\"Presenter error:\", error);\n    return message;\n  }\n}\n\nexport default BasePresenter;\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import ApiService from \"../services/api-service.js\";\r\n\r\nclass StoryModel {\r\n  constructor() {\r\n    this._apiService = new ApiService();\r\n  }\r\n\r\n  async getStories(page = 1, size = 10, location = 1) {\r\n    const stories = await this._apiService.getStories(page, size, location);\r\n    return stories;\r\n  }\r\n\r\n  async getStoryDetail(id) {\r\n    const story = await this._apiService.getStoryDetail(id);\r\n    return story;\r\n  }\r\n\r\n  async addStory(description, photoBlob, lat, lon) {\r\n    const result = await this._apiService.addStory(\r\n      description,\r\n      photoBlob,\r\n      lat,\r\n      lon\r\n    );\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default StoryModel;\r\n","import AuthService from \"./auth-service.js\";\r\n\r\nclass ApiService {\r\n  constructor() {\r\n    this._baseUrl = \"https://story-api.dicoding.dev/v1\";\r\n    this._authService = new AuthService();\r\n  }\r\n\r\n  _getAuthHeader() {\r\n    const token = this._authService.getToken();\r\n    console.log(\"Auth token: \" + token);\r\n    return token ? { Authorization: `Bearer ${token}` } : {};\r\n  }\r\n\r\n  async register(name, email, password) {\r\n    try {\r\n      const response = await fetch(`${this._baseUrl}/register`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ name, email, password }),\r\n      });\r\n\r\n      const responseJson = await response.json();\r\n\r\n      if (responseJson.error) {\r\n        throw new Error(responseJson.message);\r\n      }\r\n\r\n      return responseJson;\r\n    } catch (error) {\r\n      throw new Error(`Register failed: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  async login(email, password) {\r\n    try {\r\n      const response = await fetch(`${this._baseUrl}/login`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const responseJson = await response.json();\r\n\r\n      if (responseJson.error) {\r\n        throw new Error(responseJson.message);\r\n      }\r\n\r\n      this._authService.setAuth({\r\n        token: responseJson.loginResult.token,\r\n        name: responseJson.loginResult.name,\r\n        userId: responseJson.loginResult.userId,\r\n      });\r\n\r\n      return responseJson;\r\n    } catch (error) {\r\n      throw new Error(`Login failed: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  async getStories(page = 1, size = 10, location = 1) {\r\n    try {\r\n      const url = new URL(`${this._baseUrl}/stories`);\r\n      url.searchParams.append(\"page\", page);\r\n      url.searchParams.append(\"size\", size);\r\n      url.searchParams.append(\"location\", location);\r\n\r\n      const response = await fetch(url, {\r\n        headers: this._getAuthHeader(),\r\n      });\r\n\r\n      const responseJson = await response.json();\r\n\r\n      if (responseJson.error) {\r\n        throw new Error(responseJson.message);\r\n      }\r\n\r\n      return responseJson.listStory;\r\n    } catch (error) {\r\n      if (!this._authService.isLoggedIn()) {\r\n        return this._getStoriesAsGuest();\r\n      }\r\n\r\n      throw new Error(`Failed to get stories: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  async _getStoriesAsGuest() {\r\n    try {\r\n      return [];\r\n    } catch (error) {\r\n      throw new Error(`Failed to get stories as guest: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  async getStoryDetail(id) {\r\n    try {\r\n      const response = await fetch(`${this._baseUrl}/stories/${id}`, {\r\n        headers: this._getAuthHeader(),\r\n      });\r\n\r\n      const responseJson = await response.json();\r\n\r\n      if (responseJson.error) {\r\n        throw new Error(responseJson.message);\r\n      }\r\n\r\n      return responseJson.story;\r\n    } catch (error) {\r\n      throw new Error(`Failed to get story detail: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  async addStory(description, photoBlob, lat, lon) {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"description\", description);\r\n      formData.append(\"photo\", photoBlob);\r\n\r\n      if (lat && lon) {\r\n        formData.append(\"lat\", lat);\r\n        formData.append(\"lon\", lon);\r\n      }\r\n\r\n      const endpoint = this._authService.isLoggedIn()\r\n        ? `${this._baseUrl}/stories`\r\n        : `${this._baseUrl}/stories/guest`;\r\n\r\n      const headers = this._authService.isLoggedIn()\r\n        ? this._getAuthHeader()\r\n        : {};\r\n\r\n      const response = await fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers,\r\n        body: formData,\r\n      });\r\n\r\n      const responseJson = await response.json();\r\n\r\n      if (responseJson.error) {\r\n        throw new Error(responseJson.message);\r\n      }\r\n\r\n      return responseJson;\r\n    } catch (error) {\r\n      throw new Error(`Failed to add story: ${error.message}`);\r\n    }\r\n  }\r\n}\r\n\r\nexport default ApiService;\r\n","\r\nclass AuthService {\r\n  constructor() {\r\n    this._storageKey = \"dicodingStoryAuth\";\r\n  }\r\n\r\n\r\n  setAuth(data) {\r\n    localStorage.setItem(this._storageKey, JSON.stringify(data));\r\n  }\r\n\r\n\r\n  getAuth() {\r\n    const data = localStorage.getItem(this._storageKey);\r\n    return data ? JSON.parse(data) : null;\r\n  }\r\n\r\n\r\n  isLoggedIn() {\r\n    return !!this.getAuth();\r\n  }\r\n\r\n\r\n  getToken() {\r\n    const auth = this.getAuth();\r\n    return auth ? auth.token : null;\r\n  }\r\n\r\n\r\n  getUserName() {\r\n    const auth = this.getAuth();\r\n    return auth ? auth.name : null;\r\n  }\r\n\r\n\r\n  logout() {\r\n    localStorage.removeItem(this._storageKey);\r\n  }\r\n}\r\n\r\nexport default AuthService;\r\n","class IndexedDBService {\r\n  constructor() {\r\n    this.dbName = \"dicoding-story-db\";\r\n    this.dbVersion = 1;\r\n    this.db = null;\r\n  }\r\n\r\n  async init() {\r\n    return new Promise((resolve, reject) => {\r\n      const request = indexedDB.open(this.dbName, this.dbVersion);\r\n\r\n      request.onerror = () => {\r\n        console.error(\"Failed to open IndexedDB:\", request.error);\r\n        reject(request.error);\r\n      };\r\n\r\n      request.onsuccess = () => {\r\n        this.db = request.result;\r\n        console.log(\"IndexedDB opened successfully\");\r\n        resolve(this.db);\r\n      };\r\n\r\n      request.onupgradeneeded = (event) => {\r\n        this.db = event.target.result;\r\n        this.createObjectStores();\r\n      };\r\n    });\r\n  }\r\n\r\n  createObjectStores() {\r\n    // Store for favorite stories\r\n    if (!this.db.objectStoreNames.contains(\"favorite-stories\")) {\r\n      const favoriteStore = this.db.createObjectStore(\"favorite-stories\", {\r\n        keyPath: \"id\",\r\n      });\r\n      favoriteStore.createIndex(\"createdAt\", \"createdAt\", { unique: false });\r\n    }\r\n\r\n    // Store for offline stories (pending upload)\r\n    if (!this.db.objectStoreNames.contains(\"offline-stories\")) {\r\n      const offlineStore = this.db.createObjectStore(\"offline-stories\", {\r\n        keyPath: \"id\",\r\n        autoIncrement: true,\r\n      });\r\n      offlineStore.createIndex(\"timestamp\", \"timestamp\", { unique: false });\r\n    }\r\n\r\n    // Store for cached stories for offline viewing\r\n    if (!this.db.objectStoreNames.contains(\"cached-stories\")) {\r\n      const cachedStore = this.db.createObjectStore(\"cached-stories\", {\r\n        keyPath: \"id\",\r\n      });\r\n      cachedStore.createIndex(\"cachedAt\", \"cachedAt\", { unique: false });\r\n    }\r\n\r\n    console.log(\"Object stores created successfully\");\r\n  }\r\n\r\n  // Favorite Stories Operations\r\n  async addFavoriteStory(story) {\r\n    try {\r\n      const transaction = this.db.transaction(\r\n        [\"favorite-stories\"],\r\n        \"readwrite\"\r\n      );\r\n      const store = transaction.objectStore(\"favorite-stories\");\r\n\r\n      const favoriteStory = {\r\n        ...story,\r\n        favoriteAt: new Date().toISOString(),\r\n      };\r\n\r\n      await this.executeTransaction(store.add(favoriteStory));\r\n      console.log(\"Story added to favorites:\", story.id);\r\n      return true;\r\n    } catch (error) {\r\n      console.error(\"Failed to add favorite story:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async removeFavoriteStory(storyId) {\r\n    try {\r\n      const transaction = this.db.transaction(\r\n        [\"favorite-stories\"],\r\n        \"readwrite\"\r\n      );\r\n      const store = transaction.objectStore(\"favorite-stories\");\r\n\r\n      await this.executeTransaction(store.delete(storyId));\r\n      console.log(\"Story removed from favorites:\", storyId);\r\n      return true;\r\n    } catch (error) {\r\n      console.error(\"Failed to remove favorite story:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getFavoriteStories() {\r\n    try {\r\n      const transaction = this.db.transaction([\"favorite-stories\"], \"readonly\");\r\n      const store = transaction.objectStore(\"favorite-stories\");\r\n\r\n      const result = await this.executeTransaction(store.getAll());\r\n      console.log(\"Retrieved favorite stories:\", result.length);\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"Failed to get favorite stories:\", error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async isFavoriteStory(storyId) {\r\n    try {\r\n      const transaction = this.db.transaction([\"favorite-stories\"], \"readonly\");\r\n      const store = transaction.objectStore(\"favorite-stories\");\r\n\r\n      const result = await this.executeTransaction(store.get(storyId));\r\n      return !!result;\r\n    } catch (error) {\r\n      console.error(\"Failed to check favorite story:\", error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Offline Stories Operations\r\n  async addOfflineStory(description, photoBlob, lat, lon) {\r\n    try {\r\n      const transaction = this.db.transaction([\"offline-stories\"], \"readwrite\");\r\n      const store = transaction.objectStore(\"offline-stories\");\r\n\r\n      const offlineStory = {\r\n        description,\r\n        photoBlob,\r\n        lat,\r\n        lon,\r\n        timestamp: new Date().toISOString(),\r\n        synced: false,\r\n      };\r\n\r\n      const result = await this.executeTransaction(store.add(offlineStory));\r\n      console.log(\"Offline story added:\", result);\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"Failed to add offline story:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getOfflineStories() {\r\n    try {\r\n      const transaction = this.db.transaction([\"offline-stories\"], \"readonly\");\r\n      const store = transaction.objectStore(\"offline-stories\");\r\n\r\n      const result = await this.executeTransaction(store.getAll());\r\n      console.log(\"Retrieved offline stories:\", result.length);\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"Failed to get offline stories:\", error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async removeOfflineStory(id) {\r\n    try {\r\n      const transaction = this.db.transaction([\"offline-stories\"], \"readwrite\");\r\n      const store = transaction.objectStore(\"offline-stories\");\r\n\r\n      await this.executeTransaction(store.delete(id));\r\n      console.log(\"Offline story removed:\", id);\r\n      return true;\r\n    } catch (error) {\r\n      console.error(\"Failed to remove offline story:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Cached Stories Operations\r\n  async cacheStory(story) {\r\n    try {\r\n      const transaction = this.db.transaction([\"cached-stories\"], \"readwrite\");\r\n      const store = transaction.objectStore(\"cached-stories\");\r\n\r\n      const cachedStory = {\r\n        ...story,\r\n        cachedAt: new Date().toISOString(),\r\n      };\r\n\r\n      await this.executeTransaction(store.put(cachedStory));\r\n      console.log(\"Story cached:\", story.id);\r\n      return true;\r\n    } catch (error) {\r\n      console.error(\"Failed to cache story:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getCachedStories() {\r\n    try {\r\n      const transaction = this.db.transaction([\"cached-stories\"], \"readonly\");\r\n      const store = transaction.objectStore(\"cached-stories\");\r\n\r\n      const result = await this.executeTransaction(store.getAll());\r\n      console.log(\"Retrieved cached stories:\", result.length);\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"Failed to get cached stories:\", error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getCachedStory(storyId) {\r\n    try {\r\n      const transaction = this.db.transaction([\"cached-stories\"], \"readonly\");\r\n      const store = transaction.objectStore(\"cached-stories\");\r\n\r\n      const result = await this.executeTransaction(store.get(storyId));\r\n      return result;\r\n    } catch (error) {\r\n      console.error(\"Failed to get cached story:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Clear old cached stories (older than 7 days)\r\n  async clearOldCachedStories() {\r\n    try {\r\n      const transaction = this.db.transaction([\"cached-stories\"], \"readwrite\");\r\n      const store = transaction.objectStore(\"cached-stories\");\r\n      const index = store.index(\"cachedAt\");\r\n\r\n      const sevenDaysAgo = new Date();\r\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n\r\n      const range = IDBKeyRange.upperBound(sevenDaysAgo.toISOString());\r\n      const request = index.openCursor(range);\r\n\r\n      return new Promise((resolve, reject) => {\r\n        request.onsuccess = (event) => {\r\n          const cursor = event.target.result;\r\n          if (cursor) {\r\n            cursor.delete();\r\n            cursor.continue();\r\n          } else {\r\n            console.log(\"Old cached stories cleared\");\r\n            resolve();\r\n          }\r\n        };\r\n\r\n        request.onerror = () => reject(request.error);\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Failed to clear old cached stories:\", error);\r\n    }\r\n  }\r\n\r\n  // Utility method to execute transactions\r\n  executeTransaction(request) {\r\n    return new Promise((resolve, reject) => {\r\n      request.onsuccess = () => resolve(request.result);\r\n      request.onerror = () => reject(request.error);\r\n    });\r\n  }\r\n\r\n  // Close database connection\r\n  close() {\r\n    if (this.db) {\r\n      this.db.close();\r\n      this.db = null;\r\n      console.log(\"IndexedDB connection closed\");\r\n    }\r\n  }\r\n}\r\n\r\nexport default IndexedDBService;\r\n","import StoryPresenter from \"../presenters/story-presenter.js\";\nimport PushNotificationService from \"../services/push-notification-service.js\";\nimport IndexedDBService from \"../services/indexeddb-service.js\";\n\nclass AddStoryPage {\n  constructor(container) {\n    this._container = container;\n    this._presenter = new StoryPresenter(this);\n    this._pushNotificationService = new PushNotificationService();\n    this._indexedDBService = new IndexedDBService();\n    this._map = null;\n    this._marker = null;\n    this._position = null;\n    this._photoBlob = null;\n    this._stream = null;\n  }\n\n  async render() {\n    this._container.innerHTML = `\n      <section class=\"page form-container\" role=\"region\" aria-labelledby=\"add-story-title\">\n        <h2 id=\"add-story-title\">Add New Story</h2>\n        <div id=\"alert-container\" role=\"alert\" aria-live=\"assertive\"></div>\n        \n        <!-- Push Notification Section -->\n        <div id=\"notification-section\" class=\"form-group\">\n          <h3>Push Notifications</h3>\n          <div id=\"notification-status\"></div>\n          <button type=\"button\" id=\"enable-notifications\" style=\"display: none;\">Enable Notifications</button>\n          <button type=\"button\" id=\"disable-notifications\" style=\"display: none;\">Disable Notifications</button>\n        </div>\n        \n        <form id=\"add-story-form\">\n          <div class=\"form-group\">\n            <label for=\"description\">Description</label>\n            <textarea id=\"description\" name=\"description\" rows=\"4\" required></textarea>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"map\">Location (Click on map to set)</label>\n            <div id=\"map\" aria-label=\"Map to select story location\" tabindex=\"0\"></div>\n            <p id=\"location-display\" aria-live=\"polite\">No location selected</p>\n          </div>\n\n          <div class=\"form-group camera-container\">\n            <label for=\"video\">Take Photo with Camera</label>\n            <video id=\"video\" autoplay aria-label=\"Camera preview\"></video>\n            <canvas id=\"canvas\"></canvas>\n            <div class=\"camera-buttons\">\n              <button type=\"button\" id=\"start-camera\">Start Camera</button>\n              <button type=\"button\" id=\"capture-photo\" disabled>Capture Photo</button>\n              <button type=\"button\" id=\"stop-camera\" disabled>Stop Camera</button>\n            </div>\n          </div>\n\n          <div class=\"preview-container\">\n            <label for=\"preview\">Photo Preview</label>\n            <img id=\"preview\" src=\"\" alt=\"Captured photo preview\" style=\"display: none;\">\n          </div>\n\n          <button type=\"submit\" id=\"submit-button\" disabled>Add Story</button>\n        </form>\n      </section>\n    `;\n\n    await this._initServices();\n    this._initMap();\n    this._initCameraButtons();\n    this._initForm();\n    this._initNotificationSection();\n  }\n\n  async _initServices() {\n    try {\n      await this._indexedDBService.init();\n      await this._pushNotificationService.init();\n    } catch (error) {\n      console.error(\"Failed to initialize services:\", error);\n    }\n  }\n\n  _initMap() {\n    this._map = L.map(\"map\").setView([0, 0], 2);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(this._map);\n\n    this._map.on(\"click\", (e) => {\n      this._position = {\n        lat: e.latlng.lat,\n        lon: e.latlng.lng,\n      };\n\n      document.getElementById(\n        \"location-display\"\n      ).textContent = `Location: ${this._position.lat.toFixed(\n        4\n      )}, ${this._position.lon.toFixed(4)}`;\n\n      if (this._marker) {\n        this._marker.setLatLng(e.latlng);\n      } else {\n        this._marker = L.marker(e.latlng).addTo(this._map);\n      }\n\n      this._updateSubmitButton();\n    });\n  }\n\n  _initCameraButtons() {\n    const startCameraButton = document.getElementById(\"start-camera\");\n    const capturPhotoButton = document.getElementById(\"capture-photo\");\n    const stopCameraButton = document.getElementById(\"stop-camera\");\n    const video = document.getElementById(\"video\");\n    const canvas = document.getElementById(\"canvas\");\n    const preview = document.getElementById(\"preview\");\n\n    startCameraButton.addEventListener(\"click\", async () => {\n      try {\n        this._stream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: false,\n        });\n\n        video.srcObject = this._stream;\n        startCameraButton.disabled = true;\n        capturPhotoButton.disabled = false;\n        stopCameraButton.disabled = false;\n      } catch (error) {\n        console.error(\"Error accessing camera:\", error);\n        this.showError(`Failed to access camera: ${error.message}`);\n      }\n    });\n\n    capturPhotoButton.addEventListener(\"click\", () => {\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n\n      const context = canvas.getContext(\"2d\");\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n      canvas.toBlob(\n        (blob) => {\n          this._photoBlob = blob;\n\n          const url = URL.createObjectURL(blob);\n          preview.src = url;\n          preview.style.display = \"block\";\n\n          this._updateSubmitButton();\n        },\n        \"image/jpeg\",\n        0.8\n      );\n    });\n\n    stopCameraButton.addEventListener(\"click\", () => {\n      if (this._stream) {\n        this._stream.getTracks().forEach((track) => track.stop());\n        this._stream = null;\n        video.srcObject = null;\n      }\n\n      startCameraButton.disabled = false;\n      capturPhotoButton.disabled = true;\n      stopCameraButton.disabled = true;\n    });\n  }\n\n  _initForm() {\n    const form = document.getElementById(\"add-story-form\");\n\n    form.addEventListener(\"submit\", async (e) => {\n      e.preventDefault();\n\n      const description = document.getElementById(\"description\").value;\n\n      try {\n        // Check if online\n        if (navigator.onLine) {\n          // Use presenter instead of directly calling the API\n          await this._presenter.addStory(\n            description,\n            this._photoBlob,\n            this._position?.lat,\n            this._position?.lon\n          );\n\n          // Try to send push notification after successful story creation\n          await this._sendStoryNotification(description);\n        } else {\n          // Save for offline sync\n          await this._saveOfflineStory(description);\n          this.showSuccess(\n            \"Story saved offline. It will be uploaded when you're back online.\"\n          );\n        }\n\n        if (this._stream) {\n          this._stream.getTracks().forEach((track) => track.stop());\n        }\n\n        setTimeout(() => {\n          window.location.hash = \"#/home\";\n        }, 2000);\n      } catch (error) {\n        // Error handling is managed by the presenter\n        console.error(error);\n      }\n    });\n  }\n\n  async _saveOfflineStory(description) {\n    try {\n      await this._indexedDBService.addOfflineStory(\n        description,\n        this._photoBlob,\n        this._position?.lat,\n        this._position?.lon\n      );\n\n      // Register for background sync if supported\n      if (\n        \"serviceWorker\" in navigator &&\n        \"sync\" in window.ServiceWorkerRegistration.prototype\n      ) {\n        const registration = await navigator.serviceWorker.ready;\n        await registration.sync.register(\"background-sync-story\");\n      }\n    } catch (error) {\n      console.error(\"Failed to save offline story:\", error);\n      throw new Error(\"Failed to save story offline\");\n    }\n  }\n\n  async _sendStoryNotification(description) {\n    try {\n      // Check if push notifications are supported and subscribed\n      const status =\n        await this._pushNotificationService.getSubscriptionStatus();\n\n      if (status.isSubscribed) {\n        // The server will send the push notification\n        console.log(\"Story created, push notification will be sent by server\");\n      }\n    } catch (error) {\n      console.error(\"Failed to handle push notification:\", error);\n      // Don't throw error as story creation was successful\n    }\n  }\n\n  async _initNotificationSection() {\n    const statusElement = document.getElementById(\"notification-status\");\n    const enableButton = document.getElementById(\"enable-notifications\");\n    const disableButton = document.getElementById(\"disable-notifications\");\n\n    try {\n      const status =\n        await this._pushNotificationService.getSubscriptionStatus();\n\n      if (status.isSubscribed) {\n        statusElement.innerHTML =\n          '<p class=\"alert alert-success\">✅ Push notifications are enabled</p>';\n        disableButton.style.display = \"inline-block\";\n        enableButton.style.display = \"none\";\n      } else {\n        statusElement.innerHTML =\n          '<p class=\"alert alert-info\">🔔 Enable push notifications to get notified when your stories are published</p>';\n        enableButton.style.display = \"inline-block\";\n        disableButton.style.display = \"none\";\n      }\n    } catch (error) {\n      statusElement.innerHTML =\n        '<p class=\"alert alert-warning\">⚠️ Push notifications are not supported in this browser</p>';\n      enableButton.style.display = \"none\";\n      disableButton.style.display = \"none\";\n    }\n\n    enableButton.addEventListener(\"click\", async () => {\n      try {\n        await this._pushNotificationService.subscribe();\n        await this._initNotificationSection(); // Refresh the section\n        this.showSuccess(\"Push notifications enabled successfully!\");\n      } catch (error) {\n        console.error(\"Failed to enable notifications:\", error);\n        this.showError(\"Failed to enable push notifications\");\n      }\n    });\n\n    disableButton.addEventListener(\"click\", async () => {\n      try {\n        await this._pushNotificationService.unsubscribe();\n        await this._initNotificationSection(); // Refresh the section\n        this.showSuccess(\"Push notifications disabled successfully!\");\n      } catch (error) {\n        console.error(\"Failed to disable notifications:\", error);\n        this.showError(\"Failed to disable push notifications\");\n      }\n    });\n  }\n\n  _updateSubmitButton() {\n    const submitButton = document.getElementById(\"submit-button\");\n    submitButton.disabled = !this._photoBlob;\n  }\n\n  // Methods called by the presenter\n  showLoading() {\n    const submitButton = document.getElementById(\"submit-button\");\n    submitButton.textContent = \"Adding Story...\";\n    submitButton.disabled = true;\n  }\n\n  hideLoading() {\n    const submitButton = document.getElementById(\"submit-button\");\n    submitButton.textContent = \"Add Story\";\n    submitButton.disabled = !this._photoBlob;\n  }\n\n  showError(message) {\n    const alertContainer = document.getElementById(\"alert-container\");\n    alertContainer.innerHTML = `\n      <div class=\"alert alert-danger\">\n        ${message}\n      </div>\n    `;\n  }\n\n  showSuccess(message) {\n    const alertContainer = document.getElementById(\"alert-container\");\n    alertContainer.innerHTML = `\n      <div class=\"alert alert-success\">\n        ${message}\n      </div>\n    `;\n  }\n}\n\nexport default AddStoryPage;\n","import AuthService from \"./auth-service.js\";\r\n\r\nclass PushNotificationService {\r\n  constructor() {\r\n    this.authService = new AuthService();\r\n    this.vapidPublicKey =\r\n      \"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk\";\r\n    this.apiBaseUrl = \"https://story-api.dicoding.dev/v1\";\r\n    this.registration = null;\r\n  }\r\n\r\n  async init() {\r\n    try {\r\n      // Check if service worker is supported\r\n      if (!(\"serviceWorker\" in navigator)) {\r\n        throw new Error(\"Service Worker not supported\");\r\n      }\r\n\r\n      // Check if push messaging is supported\r\n      if (!(\"PushManager\" in window)) {\r\n        throw new Error(\"Push messaging not supported\");\r\n      }\r\n\r\n      // Get service worker registration\r\n      this.registration = await navigator.serviceWorker.ready;\r\n      console.log(\"Push notification service initialized\");\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error(\"Failed to initialize push notification service:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async requestPermission() {\r\n    try {\r\n      const permission = await Notification.requestPermission();\r\n\r\n      if (permission === \"granted\") {\r\n        console.log(\"Notification permission granted\");\r\n        return true;\r\n      } else if (permission === \"denied\") {\r\n        console.log(\"Notification permission denied\");\r\n        return false;\r\n      } else {\r\n        console.log(\"Notification permission dismissed\");\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error requesting notification permission:\", error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async subscribe() {\r\n    try {\r\n      // Check if user is logged in\r\n      if (!this.authService.isLoggedIn()) {\r\n        throw new Error(\"User must be logged in to subscribe to notifications\");\r\n      }\r\n\r\n      // Request permission if not already granted\r\n      if (Notification.permission !== \"granted\") {\r\n        const permissionGranted = await this.requestPermission();\r\n        if (!permissionGranted) {\r\n          throw new Error(\"Notification permission not granted\");\r\n        }\r\n      }\r\n\r\n      // Initialize if not already done\r\n      if (!this.registration) {\r\n        await this.init();\r\n      }\r\n\r\n      // Check if already subscribed\r\n      const existingSubscription =\r\n        await this.registration.pushManager.getSubscription();\r\n      if (existingSubscription) {\r\n        console.log(\"Already subscribed to push notifications\");\r\n        return existingSubscription;\r\n      }\r\n\r\n      // Create new subscription\r\n      const subscription = await this.registration.pushManager.subscribe({\r\n        userVisibleOnly: true,\r\n        applicationServerKey: this.urlBase64ToUint8Array(this.vapidPublicKey),\r\n      });\r\n\r\n      // Send subscription to server\r\n      await this.sendSubscriptionToServer(subscription);\r\n\r\n      console.log(\"Successfully subscribed to push notifications\");\r\n      return subscription;\r\n    } catch (error) {\r\n      console.error(\"Failed to subscribe to push notifications:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async unsubscribe() {\r\n    try {\r\n      if (!this.registration) {\r\n        await this.init();\r\n      }\r\n\r\n      const subscription =\r\n        await this.registration.pushManager.getSubscription();\r\n\r\n      if (!subscription) {\r\n        console.log(\"Not subscribed to push notifications\");\r\n        return true;\r\n      }\r\n\r\n      // Unsubscribe from browser\r\n      await subscription.unsubscribe();\r\n\r\n      // Remove subscription from server\r\n      await this.removeSubscriptionFromServer(subscription);\r\n\r\n      console.log(\"Successfully unsubscribed from push notifications\");\r\n      return true;\r\n    } catch (error) {\r\n      console.error(\"Failed to unsubscribe from push notifications:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getSubscriptionStatus() {\r\n    try {\r\n      if (!this.registration) {\r\n        await this.init();\r\n      }\r\n\r\n      const subscription =\r\n        await this.registration.pushManager.getSubscription();\r\n      return {\r\n        isSubscribed: !!subscription,\r\n        subscription: subscription,\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Failed to get subscription status:\", error);\r\n      return {\r\n        isSubscribed: false,\r\n        subscription: null,\r\n      };\r\n    }\r\n  }\r\n\r\n  async sendSubscriptionToServer(subscription) {\r\n    try {\r\n      const token = this.authService.getToken();\r\n\r\n      const subscriptionData = {\r\n        endpoint: subscription.endpoint,\r\n        keys: {\r\n          p256dh: this.arrayBufferToBase64(subscription.getKey(\"p256dh\")),\r\n          auth: this.arrayBufferToBase64(subscription.getKey(\"auth\")),\r\n        },\r\n      };\r\n\r\n      const response = await fetch(\r\n        `${this.apiBaseUrl}/notifications/subscribe`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify(subscriptionData),\r\n        }\r\n      );\r\n\r\n      const responseData = await response.json();\r\n\r\n      if (!response.ok || responseData.error) {\r\n        throw new Error(\r\n          responseData.message || \"Failed to subscribe on server\"\r\n        );\r\n      }\r\n\r\n      console.log(\"Subscription sent to server successfully\");\r\n      return responseData;\r\n    } catch (error) {\r\n      console.error(\"Failed to send subscription to server:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async removeSubscriptionFromServer(subscription) {\r\n    try {\r\n      const token = this.authService.getToken();\r\n\r\n      const subscriptionData = {\r\n        endpoint: subscription.endpoint,\r\n      };\r\n\r\n      const response = await fetch(\r\n        `${this.apiBaseUrl}/notifications/subscribe`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify(subscriptionData),\r\n        }\r\n      );\r\n\r\n      const responseData = await response.json();\r\n\r\n      if (!response.ok || responseData.error) {\r\n        throw new Error(\r\n          responseData.message || \"Failed to unsubscribe on server\"\r\n        );\r\n      }\r\n\r\n      console.log(\"Subscription removed from server successfully\");\r\n      return responseData;\r\n    } catch (error) {\r\n      console.error(\"Failed to remove subscription from server:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Helper method to convert VAPID key\r\n  urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\r\n    const base64 = (base64String + padding)\r\n      .replace(/-/g, \"+\")\r\n      .replace(/_/g, \"/\");\r\n\r\n    const rawData = window.atob(base64);\r\n    const outputArray = new Uint8Array(rawData.length);\r\n\r\n    for (let i = 0; i < rawData.length; ++i) {\r\n      outputArray[i] = rawData.charCodeAt(i);\r\n    }\r\n    return outputArray;\r\n  }\r\n\r\n  // Helper method to convert ArrayBuffer to base64\r\n  arrayBufferToBase64(buffer) {\r\n    const bytes = new Uint8Array(buffer);\r\n    let binary = \"\";\r\n    for (let i = 0; i < bytes.byteLength; i++) {\r\n      binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return window.btoa(binary);\r\n  }\r\n\r\n  // Test notification (for development)\r\n  async sendTestNotification() {\r\n    try {\r\n      if (Notification.permission === \"granted\") {\r\n        new Notification(\"Test Notification\", {\r\n          body: \"This is a test notification from Dicoding Story App\",\r\n          icon: \"/icons/icon-192x192.png\",\r\n          badge: \"/icons/icon-72x72.png\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to send test notification:\", error);\r\n    }\r\n  }\r\n}\r\n\r\nexport default PushNotificationService;\r\n","import AuthPresenter from \"../presenters/auth-presenter.js\";\n\nclass LoginPage {\n  constructor(container) {\n    this._container = container;\n    this._presenter = new AuthPresenter(this);\n  }\n\n  async render() {\n    this._container.innerHTML = `\n      <section class=\"page form-container\" role=\"region\" aria-labelledby=\"login-title\">\n        <h2 id=\"login-title\">Login</h2>\n        <div id=\"alert-container\" role=\"alert\" aria-live=\"assertive\"></div>\n        <form id=\"login-form\">\n          <div class=\"form-group\">\n            <label for=\"email\">Email</label>\n            <input type=\"email\" id=\"email\" name=\"email\" required>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"password\">Password</label>\n            <input type=\"password\" id=\"password\" name=\"password\" required>\n          </div>\n          <button type=\"submit\" id=\"submit-button\">Login</button>\n        </form>\n        <p>Don't have an account? <a href=\"#/register\">Register here</a></p>\n      </section>\n    `;\n\n    this._initLoginForm();\n  }\n\n  _initLoginForm() {\n    const form = document.getElementById(\"login-form\");\n\n    form.addEventListener(\"submit\", async (e) => {\n      e.preventDefault();\n\n      const email = document.getElementById(\"email\").value;\n      const password = document.getElementById(\"password\").value;\n\n      try {\n        await this._presenter.login(email, password);\n\n        setTimeout(() => {\n          window.location.hash = \"#/home\";\n        }, 1000);\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  showLoading() {\n    const button = document.getElementById(\"submit-button\");\n    button.textContent = \"Logging in...\";\n    button.disabled = true;\n  }\n\n  hideLoading() {\n    const button = document.getElementById(\"submit-button\");\n    button.textContent = \"Login\";\n    button.disabled = false;\n  }\n\n  showError(message) {\n    const alertContainer = document.getElementById(\"alert-container\");\n    alertContainer.innerHTML = `\n      <div class=\"alert alert-danger\">\n        ${message}\n      </div>\n    `;\n  }\n\n  showSuccess(message) {\n    const alertContainer = document.getElementById(\"alert-container\");\n    alertContainer.innerHTML = `\n      <div class=\"alert alert-success\">\n        ${message}\n      </div>\n    `;\n  }\n}\n\nexport default LoginPage;\n","import BasePresenter from \"./base-presenter.js\";\nimport AuthModel from \"../models/auth-model.js\"; // Impor AuthModel\n\nclass AuthPresenter extends BasePresenter {\n  constructor(view) {\n    super(view);\n    this._authModel = new AuthModel(); // Gunakan AuthModel\n  }\n\n  async login(email, password) {\n    try {\n      this._view.showLoading();\n      // Panggil metode login dari AuthModel\n      const result = await this._authModel.login(email, password);\n      this._view.showSuccess(\"Login successful. Redirecting to home page...\");\n      return result;\n    } catch (error) {\n      this._view.showError(error.message);\n      throw error;\n    } finally {\n      this._view.hideLoading();\n    }\n  }\n\n  async register(name, email, password) {\n    try {\n      this._view.showLoading();\n      // Panggil metode register dari AuthModel\n      const result = await this._authModel.register(name, email, password);\n      this._view.showSuccess(\n        \"Registration successful. Please login with your new account.\"\n      );\n      return result;\n    } catch (error) {\n      this._view.showError(error.message);\n      throw error;\n    } finally {\n      this._view.hideLoading();\n    }\n  }\n\n  isLoggedIn() {\n    return this._authModel.isLoggedIn(); // Gunakan AuthModel\n  }\n\n  logout() {\n    this._authModel.logout(); // Gunakan AuthModel\n  }\n}\n\nexport default AuthPresenter;\n","import ApiService from \"../services/api-service.js\";\r\nimport AuthService from \"../services/auth-service.js\";\r\n\r\nclass AuthModel {\r\n  constructor() {\r\n    this._apiService = new ApiService();\r\n    this._authService = new AuthService();\r\n  }\r\n\r\n  async login(email, password) {\r\n    const result = await this._apiService.login(email, password);\r\n    return result;\r\n  }\r\n\r\n  async register(name, email, password) {\r\n    const result = await this._apiService.register(name, email, password);\r\n    return result;\r\n  }\r\n\r\n  isLoggedIn() {\r\n    return this._authService.isLoggedIn();\r\n  }\r\n\r\n  logout() {\r\n    this._authService.logout();\r\n  }\r\n}\r\n\r\nexport default AuthModel;\r\n","import AuthPresenter from \"../presenters/auth-presenter.js\";\n\nclass RegisterPage {\n  constructor(container) {\n    this._container = container;\n    this._presenter = new AuthPresenter(this);\n  }\n\n  async render() {\n    this._container.innerHTML = `\n      <section class=\"page form-container\" role=\"region\" aria-labelledby=\"register-title\">\n        <h2 id=\"register-title\">Register</h2>\n        <div id=\"alert-container\" role=\"alert\" aria-live=\"assertive\"></div>\n        <form id=\"register-form\">\n          <div class=\"form-group\">\n            <label for=\"name\">Name</label>\n            <input type=\"text\" id=\"name\" name=\"name\" required>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"email\">Email</label>\n            <input type=\"email\" id=\"email\" name=\"email\" required>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"password\">Password (min 8 characters)</label>\n            <input type=\"password\" id=\"password\" name=\"password\" minlength=\"8\" required>\n          </div>\n          <button type=\"submit\" id=\"submit-button\">Register</button>\n        </form>\n        <p>Already have an account? <a href=\"#/login\">Login here</a></p>\n      </section>\n    `;\n\n    this._initRegisterForm();\n  }\n\n  _initRegisterForm() {\n    const form = document.getElementById(\"register-form\");\n\n    form.addEventListener(\"submit\", async (e) => {\n      e.preventDefault();\n\n      const name = document.getElementById(\"name\").value;\n      const email = document.getElementById(\"email\").value;\n      const password = document.getElementById(\"password\").value;\n\n      try {\n        await this._presenter.register(name, email, password);\n\n        setTimeout(() => {\n          window.location.hash = \"#/login\";\n        }, 2000);\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  showLoading() {\n    const button = document.getElementById(\"submit-button\");\n    button.textContent = \"Registering...\";\n    button.disabled = true;\n  }\n\n  hideLoading() {\n    const button = document.getElementById(\"submit-button\");\n    button.textContent = \"Register\";\n    button.disabled = false;\n  }\n\n  showError(message) {\n    const alertContainer = document.getElementById(\"alert-container\");\n    alertContainer.innerHTML = `\n      <div class=\"alert alert-danger\">\n        ${message}\n      </div>\n    `;\n  }\n\n  showSuccess(message) {\n    const alertContainer = document.getElementById(\"alert-container\");\n    alertContainer.innerHTML = `\n      <div class=\"alert alert-success\">\n        ${message}\n      </div>\n    `;\n  }\n}\n\nexport default RegisterPage;\n","import StoryPresenter from \"../presenters/story-presenter.js\";\nimport IndexedDBService from \"../services/indexeddb-service.js\";\n\nclass DetailPage {\n  constructor(container, id) {\n    this._container = container;\n    this._id = id;\n    this._presenter = new StoryPresenter(this);\n    this._indexedDBService = new IndexedDBService();\n    this._story = null;\n    this._map = null;\n  }\n\n  async render() {\n    this._container.innerHTML = `\n      <section class=\"page\" role=\"region\" aria-labelledby=\"detail-title\">\n        <h2 id=\"detail-title\">Story Detail</h2>\n        <div id=\"loading\" role=\"status\" aria-live=\"polite\">Loading story...</div>\n        <div id=\"error-container\" role=\"alert\" aria-live=\"assertive\" style=\"display: none;\"></div>\n        <div id=\"story-detail\" style=\"display: none;\"></div>\n      </section>\n    `;\n\n    await this._initIndexedDB();\n    await this._fetchStory();\n    this._renderStory();\n  }\n\n  async _initIndexedDB() {\n    try {\n      await this._indexedDBService.init();\n    } catch (error) {\n      console.error(\"Failed to initialize IndexedDB:\", error);\n    }\n  }\n\n  async _fetchStory() {\n    try {\n      this._story = await this._presenter.getStoryDetail(this._id);\n    } catch (error) {\n      console.error(\"Error fetching story:\", error);\n      // Try to get from IndexedDB cache\n      try {\n        this._story = await this._indexedDBService.getCachedStory(this._id);\n        if (this._story) {\n          console.log(\"Story loaded from cache\");\n        }\n      } catch (cacheError) {\n        console.error(\"Error loading from cache:\", cacheError);\n      }\n    }\n  }\n\n  async _renderStory() {\n    if (!this._story) return;\n\n    document.getElementById(\"loading\").style.display = \"none\";\n\n    const storyDetail = document.getElementById(\"story-detail\");\n    storyDetail.style.display = \"block\";\n\n    const isFavorite = await this._checkIfFavorite(this._story.id);\n\n    storyDetail.innerHTML = `\n      <div class=\"story-detail\">\n        <img src=\"${this._story.photoUrl}\" alt=\"Photo by ${\n      this._story.name\n    }\" class=\"story-img\">\n        <h3>${this._story.name}</h3>\n        <p class=\"story-date\">${this._formatDate(this._story.createdAt)}</p>\n        <p class=\"story-description\">${this._story.description}</p>\n        <div class=\"story-actions\">\n          <button \n            id=\"favorite-btn\" \n            class=\"favorite-btn ${isFavorite ? \"is-favorite\" : \"\"}\"\n            aria-label=\"${\n              isFavorite ? \"Remove from favorites\" : \"Add to favorites\"\n            }\"\n          >\n            ${isFavorite ? \"❤️ Remove from Favorites\" : \"🤍 Add to Favorites\"}\n          </button>\n        </div>\n        ${\n          this._story.lat && this._story.lon\n            ? '<div id=\"map\" aria-label=\"Map showing story location\"></div>'\n            : \"\"\n        }\n        <a href=\"#/home\">Back to Home</a>\n      </div>\n    `;\n\n    this._initFavoriteButton();\n\n    if (this._story.lat && this._story.lon) {\n      this._initMap();\n    }\n  }\n\n  async _checkIfFavorite(storyId) {\n    try {\n      return await this._indexedDBService.isFavoriteStory(storyId);\n    } catch (error) {\n      console.error(\"Failed to check favorite status:\", error);\n      return false;\n    }\n  }\n\n  _initFavoriteButton() {\n    const favoriteButton = document.getElementById(\"favorite-btn\");\n\n    favoriteButton.addEventListener(\"click\", async (e) => {\n      e.preventDefault();\n      const isFavorite = favoriteButton.classList.contains(\"is-favorite\");\n\n      try {\n        if (isFavorite) {\n          await this._removeFavorite(favoriteButton);\n        } else {\n          await this._addFavorite(favoriteButton);\n        }\n      } catch (error) {\n        console.error(\"Failed to update favorite:\", error);\n        this.showError(\"Failed to update favorite status\");\n      }\n    });\n  }\n\n  async _addFavorite(button) {\n    await this._indexedDBService.addFavoriteStory(this._story);\n\n    button.classList.add(\"is-favorite\");\n    button.textContent = \"❤️ Remove from Favorites\";\n    button.setAttribute(\"aria-label\", \"Remove from favorites\");\n\n    this.showSuccess(\"Story added to favorites!\");\n  }\n\n  async _removeFavorite(button) {\n    await this._indexedDBService.removeFavoriteStory(this._story.id);\n\n    button.classList.remove(\"is-favorite\");\n    button.textContent = \"🤍 Add to Favorites\";\n    button.setAttribute(\"aria-label\", \"Add to favorites\");\n\n    this.showSuccess(\"Story removed from favorites!\");\n  }\n\n  _initMap() {\n    this._map = L.map(\"map\").setView([this._story.lat, this._story.lon], 13);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(this._map);\n\n    const marker = L.marker([this._story.lat, this._story.lon]).addTo(\n      this._map\n    );\n    marker\n      .bindPopup(\n        `\n      <div class=\"map-popup\">\n        <img src=\"${this._story.photoUrl}\" alt=\"Photo by ${this._story.name}\">\n        <h3>${this._story.name}</h3>\n        <p>${this._truncateText(this._story.description, 50)}</p>\n      </div>\n    `\n      )\n      .openPopup();\n  }\n\n  _truncateText(text, maxLength) {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + \"...\";\n  }\n\n  _formatDate(dateString) {\n    const options = {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"numeric\",\n      minute: \"numeric\",\n    };\n    return new Date(dateString).toLocaleDateString(\"id-ID\", options);\n  }\n\n  showLoading() {\n    const loadingElement = document.getElementById(\"loading\");\n    loadingElement.style.display = \"block\";\n  }\n\n  hideLoading() {\n    const loadingElement = document.getElementById(\"loading\");\n    loadingElement.style.display = \"none\";\n  }\n\n  showError(message) {\n    document.getElementById(\"loading\").style.display = \"none\";\n\n    const errorContainer = document.getElementById(\"error-container\");\n    errorContainer.style.display = \"block\";\n    errorContainer.innerHTML = `\n      <div class=\"alert alert-danger\">\n        ${message}\n      </div>\n      <a href=\"#/home\">Back to Home</a>\n    `;\n  }\n\n  showSuccess(message) {\n    const errorContainer = document.getElementById(\"error-container\");\n    errorContainer.style.display = \"block\";\n    errorContainer.innerHTML = `\n      <div class=\"alert alert-success\">\n        ${message}\n      </div>\n    `;\n\n    // Auto-hide success message after 3 seconds\n    setTimeout(() => {\n      errorContainer.style.display = \"none\";\n    }, 3000);\n  }\n}\n\nexport default DetailPage;\n","import IndexedDBService from \"../services/indexeddb-service.js\";\r\n\r\nclass FavoritesPage {\r\n  constructor(container) {\r\n    this._container = container;\r\n    this._indexedDBService = new IndexedDBService();\r\n    this._favoriteStories = [];\r\n  }\r\n\r\n  async render() {\r\n    this._container.innerHTML = `\r\n      <section class=\"page\" role=\"region\" aria-labelledby=\"favorites-title\">\r\n        <h2 id=\"favorites-title\">Favorite Stories</h2>\r\n        <div id=\"loading\" role=\"status\" aria-live=\"polite\">Loading favorite stories...</div>\r\n        <div id=\"error-container\" role=\"alert\" aria-live=\"assertive\" style=\"display:none;\"></div>\r\n        <div id=\"empty-state\" style=\"display:none;\">\r\n          <p>You haven't saved any favorite stories yet.</p>\r\n          <p><a href=\"#/home\">Browse stories</a> and click the heart icon to add them to your favorites.</p>\r\n        </div>\r\n        <div id=\"favorites-list\" class=\"story-list\"></div>\r\n        <div id=\"bulk-actions\" style=\"display:none;\">\r\n          <button id=\"clear-all-favorites\" type=\"button\">Clear All Favorites</button>\r\n        </div>\r\n      </section>\r\n    `;\r\n\r\n    await this._initIndexedDB();\r\n    await this._loadFavoriteStories();\r\n    this._renderFavoriteStories();\r\n    this._initBulkActions();\r\n  }\r\n\r\n  async _initIndexedDB() {\r\n    try {\r\n      await this._indexedDBService.init();\r\n    } catch (error) {\r\n      console.error(\"Failed to initialize IndexedDB:\", error);\r\n      this.showError(\r\n        \"Failed to load favorites. Please try refreshing the page.\"\r\n      );\r\n    }\r\n  }\r\n\r\n  async _loadFavoriteStories() {\r\n    try {\r\n      this._favoriteStories = await this._indexedDBService.getFavoriteStories();\r\n      console.log(\"Loaded favorite stories:\", this._favoriteStories.length);\r\n    } catch (error) {\r\n      console.error(\"Failed to load favorite stories:\", error);\r\n      this.showError(\"Failed to load favorite stories.\");\r\n    }\r\n  }\r\n\r\n  _renderFavoriteStories() {\r\n    const loadingElement = document.getElementById(\"loading\");\r\n    const favoritesListElement = document.getElementById(\"favorites-list\");\r\n    const emptyStateElement = document.getElementById(\"empty-state\");\r\n    const bulkActionsElement = document.getElementById(\"bulk-actions\");\r\n\r\n    loadingElement.style.display = \"none\";\r\n\r\n    if (this._favoriteStories.length === 0) {\r\n      emptyStateElement.style.display = \"block\";\r\n      favoritesListElement.style.display = \"none\";\r\n      bulkActionsElement.style.display = \"none\";\r\n      return;\r\n    }\r\n\r\n    emptyStateElement.style.display = \"none\";\r\n    favoritesListElement.style.display = \"grid\";\r\n    bulkActionsElement.style.display = \"block\";\r\n\r\n    favoritesListElement.innerHTML = this._favoriteStories\r\n      .sort((a, b) => new Date(b.favoriteAt) - new Date(a.favoriteAt))\r\n      .map(\r\n        (story) => `\r\n      <article class=\"story-item\">\r\n        <img src=\"${story.photoUrl}\" alt=\"Photo by ${\r\n          story.name\r\n        }\" class=\"story-img\">\r\n        <div class=\"story-content\">\r\n          <h3>${story.name}</h3>\r\n          <p class=\"story-description\">${this._truncateText(\r\n            story.description,\r\n            100\r\n          )}</p>\r\n          <p class=\"story-date\">Added to favorites: ${this._formatDate(\r\n            story.favoriteAt\r\n          )}</p>\r\n          <div class=\"story-actions\">\r\n            <a href=\"#/detail/${story.id}\" class=\"story-link\">Read more</a>\r\n            <button \r\n              class=\"remove-favorite-btn\" \r\n              data-story-id=\"${story.id}\"\r\n              aria-label=\"Remove ${story.name} from favorites\"\r\n            >\r\n              Remove from Favorites\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </article>\r\n    `\r\n      )\r\n      .join(\"\");\r\n\r\n    this._initRemoveFavoriteButtons();\r\n  }\r\n\r\n  _initRemoveFavoriteButtons() {\r\n    const removeButtons = document.querySelectorAll(\".remove-favorite-btn\");\r\n\r\n    removeButtons.forEach((button) => {\r\n      button.addEventListener(\"click\", async (e) => {\r\n        e.preventDefault();\r\n        const storyId = button.dataset.storyId;\r\n        await this._removeFavoriteStory(storyId);\r\n      });\r\n    });\r\n  }\r\n\r\n  _initBulkActions() {\r\n    const clearAllButton = document.getElementById(\"clear-all-favorites\");\r\n\r\n    clearAllButton.addEventListener(\"click\", async () => {\r\n      const confirmed = confirm(\r\n        \"Are you sure you want to remove all favorite stories?\"\r\n      );\r\n      if (confirmed) {\r\n        await this._clearAllFavorites();\r\n      }\r\n    });\r\n  }\r\n\r\n  async _removeFavoriteStory(storyId) {\r\n    try {\r\n      await this._indexedDBService.removeFavoriteStory(storyId);\r\n\r\n      // Remove from local array\r\n      this._favoriteStories = this._favoriteStories.filter(\r\n        (story) => story.id !== storyId\r\n      );\r\n\r\n      // Re-render the list\r\n      this._renderFavoriteStories();\r\n\r\n      this.showSuccess(\"Story removed from favorites\");\r\n    } catch (error) {\r\n      console.error(\"Failed to remove favorite story:\", error);\r\n      this.showError(\"Failed to remove story from favorites\");\r\n    }\r\n  }\r\n\r\n  async _clearAllFavorites() {\r\n    try {\r\n      // Remove all favorites one by one\r\n      for (const story of this._favoriteStories) {\r\n        await this._indexedDBService.removeFavoriteStory(story.id);\r\n      }\r\n\r\n      this._favoriteStories = [];\r\n      this._renderFavoriteStories();\r\n\r\n      this.showSuccess(\"All favorite stories removed\");\r\n    } catch (error) {\r\n      console.error(\"Failed to clear all favorites:\", error);\r\n      this.showError(\"Failed to clear favorite stories\");\r\n    }\r\n  }\r\n\r\n  _truncateText(text, maxLength) {\r\n    if (text.length <= maxLength) return text;\r\n    return text.substring(0, maxLength) + \"...\";\r\n  }\r\n\r\n  _formatDate(dateString) {\r\n    const options = {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    };\r\n    return new Date(dateString).toLocaleDateString(\"id-ID\", options);\r\n  }\r\n\r\n  showLoading() {\r\n    const loadingElement = document.getElementById(\"loading\");\r\n    if (loadingElement) {\r\n      loadingElement.style.display = \"block\";\r\n    }\r\n  }\r\n\r\n  hideLoading() {\r\n    const loadingElement = document.getElementById(\"loading\");\r\n    if (loadingElement) {\r\n      loadingElement.style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  showError(message) {\r\n    const errorContainer = document.getElementById(\"error-container\");\r\n    if (errorContainer) {\r\n      errorContainer.style.display = \"block\";\r\n      errorContainer.innerHTML = `\r\n        <div class=\"alert alert-danger\">\r\n          ${message}\r\n        </div>\r\n      `;\r\n    }\r\n  }\r\n\r\n  showSuccess(message) {\r\n    const errorContainer = document.getElementById(\"error-container\");\r\n    if (errorContainer) {\r\n      errorContainer.style.display = \"block\";\r\n      errorContainer.innerHTML = `\r\n        <div class=\"alert alert-success\">\r\n          ${message}\r\n        </div>\r\n      `;\r\n\r\n      // Auto-hide success message after 3 seconds\r\n      setTimeout(() => {\r\n        errorContainer.style.display = \"none\";\r\n      }, 3000);\r\n    }\r\n  }\r\n}\r\n\r\nexport default FavoritesPage;\r\n","module.exports = parcelRequire.resolve(\"sw.js\");"],"names":[],"version":3,"file":"dicoding-story.f72d0d54.js.map","sourceRoot":"/__parcel_source_root/"}